<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>תרגול אוצר מילים באנגלית - מיקום אקראי (Responsive)</title>
  <style>
    /* עיצוב בסיסי לכל המסכים */
    * {
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      direction: rtl;
      margin: 0;
      padding: 0;
      background: #f1f1f1;
    }

    header {
      background: linear-gradient(135deg, #00cc66, #007BFF);
      color: #fff;
      padding: 1rem;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
    }

    .container {
      background: #fff;
      margin: 1rem auto;
      max-width: 600px;  /* גודל מירבי למסך רחב */
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .status {
      margin: 0.5rem 0 1rem 0;
      font-size: 1.1rem;
      font-weight: bold;
      text-align: center;
    }

    .word {
      font-size: 1.6rem;
      margin-bottom: 1rem;
      font-weight: bold;
      text-align: center;
      color: #333;
    }

    .options {
      margin-bottom: 1rem;
    }

    .options button {
      display: block;
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.6rem 1rem;
      background: #EEE;
      border: 1px solid #CCC;
      border-radius: 4px;
      cursor: pointer;
      text-align: left;
      font-size: 1rem;
      transition: background 0.2s ease-in-out;
    }
    .options button:hover {
      background: #DDD;
    }
    .options button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #answerFeedback {
      margin-top: 0.5rem;
      font-weight: bold;
      text-align: center;
      min-height: 1.5em; /* כדי שלא יקפוץ */
    }

    .translation {
      margin: 1rem 0;
      color: #444;
      font-style: italic;
      display: none;
      text-align: center;
    }

    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
      margin-top: 1rem;
    }
    .actions button {
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s ease-in-out;
      min-width: 120px;
      text-align: center;
    }
    #showTranslationBtn {
      background-color: #ffcc00;
    }
    #showTranslationBtn:hover {
      background-color: #e6b800;
    }
    #knowBtn {
      background-color: #00cc66;
      color: #fff;
    }
    #knowBtn:hover {
      background-color: #00b35a;
    }
    #nextWordBtn {
      background-color: #007BFF;
      color: #fff;
      display: none;
    }
    #nextWordBtn:hover {
      background-color: #0066cc;
    }

    footer {
      margin-top: 1rem;
      text-align: center;
      font-size: 0.9rem;
      color: #666;
    }

    /* מדיה קווארי למסכים צרים יותר (טלפונים) */
    @media (max-width: 600px) {
      header h1 {
        font-size: 1.5rem;
      }
      .container {
        margin: 0.5rem;
        padding: 1rem;
      }
      .word {
        font-size: 1.4rem;
      }
      .options button {
        font-size: 1rem;
        padding: 0.5rem;
      }
      .actions button {
        font-size: 0.95rem;
        padding: 0.5rem;
      }
    }

  </style>
</head>
<body>

<header>
  <h1>תרגול אוצר מילים באנגלית</h1>
</header>

<div class="container">
  <div class="status">
    <span id="knownCount">0</span> מילים ידועות מתוך <span id="totalCount">0</span>
  </div>

  <div class="word" id="wordDisplay"></div>
  <div class="options" id="optionsContainer"></div>

  <!-- כאן תוצג התשובה הנכונה/שגויה -->
  <div id="answerFeedback"></div>

  <!-- תרגום בעברית (מוסתר בהתחלה) -->
  <div class="translation" id="translationContainer"></div>
  
  <div class="actions">
    <button id="showTranslationBtn">הצג תרגום</button>
    <button id="knowBtn">אני יודע/ת את המילה</button>
    <button id="nextWordBtn">למילה הבאה</button>
  </div>
</div>

<footer>
  &copy; 2025 תרגל ולמד
</footer>

<script>
// ======= מאגר מילים לדוגמה =======
// אפשר להוסיף כמה מילים שתרצה
const words = [
  {
    word: "above",
    correctDefinition: "in a higher place",
    translation: "מעל",
    known: false
  },
  {
    word: "account",
    correctDefinition: "a report, a description of an event",
    translation: "חשבון בנק, דו\"ח",
    known: false
  },
  {
    word: "acquire",
    correctDefinition: "to get, to gain possession of",
    translation: "להשיג, לרכוש",
    known: false
  },
  {
    word: "age",
    correctDefinition: "period of history",
    translation: "עידן",
    known: false
  },
  {
    word: "aged",
    correctDefinition: "old",
    translation: "זקן",
    known: false
  }
];

// ======= פונקציה לערבוב מערך =======
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// ======= פונקציה ליצירת הסחות (3 הגדרות שגויות באופן אקראי) =======
function getRandomDistractors(wordObj, allWords) {
  // אוספים את ההגדרות הנכונות של שאר המילים
  const allDefinitions = allWords
    .filter(w => w.word !== wordObj.word)
    .map(w => w.correctDefinition);

  shuffleArray(allDefinitions);
  return allDefinitions.slice(0, 3);
}

// ======= בודק אם כולן ידועות =======
function allKnown() {
  return words.every(w => w.known);
}

// ======= מחפש אינדקס אקראי מתוך המילים הלא-ידועות =======
function getRandomUnknownIndex() {
  const unknownIndices = words
    .map((w, idx) => w.known ? -1 : idx)
    .filter(i => i !== -1);

  if (unknownIndices.length === 0) {
    return -1; // אין עוד מילים לא ידועות
  }
  const randomPos = Math.floor(Math.random() * unknownIndices.length);
  return unknownIndices[randomPos];
}

// ======= עדכון הסטטוס (מונים) =======
function updateStatus() {
  const knownCount = words.filter(w => w.known).length;
  document.getElementById("knownCount").textContent = knownCount;
  document.getElementById("totalCount").textContent = words.length;
}

// ======= הצגת מילה חדשה באקראי =======
let currentWordIndex = -1;

function showWord() {
  updateStatus();

  // אם הכל ידוע => סיום
  if (allKnown()) {
    endPractice();
    return;
  }

  // מוצאים אינדקס אקראי של מילה לא ידועה
  currentWordIndex = getRandomUnknownIndex();
  if (currentWordIndex === -1) {
    endPractice();
    return;
  }

  const wordObj = words[currentWordIndex];
  
  // מציגים את המילה
  document.getElementById("wordDisplay").textContent = wordObj.word;
  document.getElementById("answerFeedback").textContent = "";
  
  // מכינים 4 אופציות (נכונה + 3 הסחות)
  const distractors = getRandomDistractors(wordObj, words);
  const options = [wordObj.correctDefinition, ...distractors];
  shuffleArray(options);

  // בונים את כפתורי האופציות
  const optionsContainer = document.getElementById("optionsContainer");
  optionsContainer.innerHTML = "";
  options.forEach(definition => {
    const btn = document.createElement("button");
    btn.textContent = definition;
    btn.addEventListener("click", () => {
      checkAnswer(definition, wordObj.correctDefinition);
    });
    optionsContainer.appendChild(btn);
  });

  // מסתירים את התרגום + כפתור "למילה הבאה"
  const translationDiv = document.getElementById("translationContainer");
  translationDiv.style.display = "none";
  translationDiv.textContent = "";
  document.getElementById("nextWordBtn").style.display = "none";
}

// ======= בדיקת תשובה =======
function checkAnswer(selected, correct) {
  const feedbackDiv = document.getElementById("answerFeedback");
  if (selected === correct) {
    feedbackDiv.style.color = "green";
    feedbackDiv.textContent = "תשובה נכונה! כל הכבוד.";
  } else {
    feedbackDiv.style.color = "red";
    feedbackDiv.textContent = "תשובה שגויה. נסה/י שוב.";
  }

  // נטרול הכפתורים
  const allOptionButtons = document.querySelectorAll("#optionsContainer button");
  allOptionButtons.forEach(btn => {
    btn.disabled = true;
  });

  // כפתור "למילה הבאה"
  document.getElementById("nextWordBtn").style.display = "inline-block";
}

// ======= כפתור "אני יודע את המילה" =======
document.getElementById("knowBtn").addEventListener("click", () => {
  if (currentWordIndex !== -1) {
    words[currentWordIndex].known = true;
  }
  showWord();
});

// ======= כפתור "למילה הבאה" =======
document.getElementById("nextWordBtn").addEventListener("click", () => {
  showWord();
});

// ======= כפתור "הצג תרגום" =======
document.getElementById("showTranslationBtn").addEventListener("click", () => {
  if (currentWordIndex !== -1) {
    const translationDiv = document.getElementById("translationContainer");
    translationDiv.textContent = words[currentWordIndex].translation;
    translationDiv.style.display = "block";
  }
});

// ======= סיום התרגול =======
function endPractice() {
  const container = document.querySelector(".container");
  const knownCount = words.filter(w => w.known).length;
  container.innerHTML = `
    <h2 style="text-align:center;">סיימת את התרגול!</h2>
    <p style="text-align:center;">למדת בהצלחה ${knownCount} מילים מתוך ${words.length}.</p>
  `;
}

// ======= התחלה =======
showWord();
</script>

</body>
</html>
